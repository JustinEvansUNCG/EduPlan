<html>

<head>
    {% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>{% block title %}{% endblock %} - EDUPlan</title>
    {% endblock %}
</head>

<body>

    <header>

        <header>

            <nav class="navbar">
                <ul class="nav-links">
                    <li><a href="{{ url_for('main.home') }}">Home</a></li>
                    <li><a href="{{ url_for('main.course_content') }}">Course Selection</a></li>
                    <li><a href="{{ url_for('main.study_planner') }}">Study Planner</a></li>
                    <li><a href="{{ url_for('main.resources') }}">Resources</a></li>
                    {% if current_user.is_authenticated and not current_user.canvas_token %}
                    <li><a href="{{ url_for('main.connect_canvas') }}" class="btn btn-warning">Connect Canvas</a></li>
                    {% endif %}
                    {% if current_user.is_authenticated %}
                    <li><a href="{{ url_for('main.canvas_assignments') }}">Assignments</a></li>
                    {% endif %}
                    {% if not current_user.is_authenticated %}
                    <li><a href="{{ url_for('main.login') }}">Login</a></li>
                    <li><a href="{{ url_for('main.sign_up') }}">Sign Up</a></li>
                    {% endif %}
                </ul>

                {% if current_user.is_authenticated %}
                <div class="user-dropdown">
                    <div class="user-circle" onclick="toggleDropdown()">
                        {{ current_user.name[0] }}{{ current_user.name.split()[-1][0] }}
                    </div>
                    <div id="dropdown-menu" class="dropdown-content">
                        <a href="{{ url_for('main.profile') }}">Profile</a>
                        <form action="{{ url_for('main.logout') }}" method="POST" style="padding: 0; margin: 0;">
          
                            <button type="submit" class="dropdown-link">Logout</button>
                        </form>
                    </div>
                </div>
                {% endif %}
            </nav>
        </header>
        <div id="content">{% block content %}{% endblock %}</div>

        <div id="footer">
            {% block footer %}
            <footer>
                <p>&copy; 2025 EDUPlan. All rights reserved.</p>
            </footer>
            {% endblock %}
        </div>
        <script>
            function toggleDropdown() {
                const dropdown = document.getElementById("dropdown-menu");
                dropdown.classList.toggle("show");
            }

            // Close dropdown if clicked outside
            window.onclick = function (e) {
                if (!e.target.matches('.user-circle')) {
                    const dropdown = document.getElementById("dropdown-menu");
                    if (dropdown && dropdown.classList.contains('show')) {
                        dropdown.classList.remove('show');
                    }
                }
            };
        </script>

</body>