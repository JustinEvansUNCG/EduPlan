{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='profile.css') }}">

{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2>Your Profile</h2>
    <p><strong>Name:</strong> {{ user.name }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>

    <hr>
    <h4>Upload Transcript</h4>

    <div class="flex-pair">
        <div class="auth-box transcript-instructions">
            <h2>How to Download Your Unofficial Transcript (Student View)</h2>
            <ol>
                <li>Log in to DegreeWorks.</li>
                <li>Make sure you are on the <strong>â€œWorksheetsâ€</strong> tab.</li>
                <li>Click the print icon <strong>â€œCreate PDFâ€</strong> to view your transcript.</li>
                <li>Once the PDF opens in a new tab or window, open the browserâ€™s <strong>Print</strong> menu (<kbd>Ctrl+P</kbd> or <kbd>Cmd+P</kbd>).</li>
                <li>Set the printer destination to <strong>â€œSave as PDF.â€</strong></li>
                <li>Click <strong>Save</strong> to download your unofficial transcript.</li>
            </ol>
            <p><strong>Note:</strong> If you're a double major, you may need to download transcripts for each major individually.</p>
        </div>
        <section>

        <form method="POST" action="{{ url_for('main.transcript_reader') }}" enctype="multipart/form-data" class="upload-box">
            <input type="file" name="transcript" class="form-control mb-2" required>
            <button type="submit" class="btn btn-secondary">Upload</button>
        </form>
        </section>
    </div>

    <hr>
    <h4>Canvas Access Token</h4>

    {% if message %}
    <div class="success-message">{{ message }}</div>
    {% endif %}

    <div class="flex-pair">
        <div class="auth-box transcript-instructions">
            <h2>ğŸ”‘ How to Generate a Canvas Token</h2>
            <ol>
                <li>ğŸ”— Go to <a href="https://uncg.instructure.com" target="_blank">uncg.instructure.com</a> and log in</li>
                <li>ğŸ‘¤ Click <strong>Account</strong> â†’ <strong>Settings</strong></li>
                <li>âš™ï¸ Scroll to <strong>Approved Integrations</strong></li>
                <li>â• Click <strong>+ New Access Token</strong></li>
                <li>âœï¸ Fill in:
                    <ul>
                        <li><strong>Purpose:</strong> <code>EduPlan Integration</code></li>
                        <li><strong>Expiration Date:</strong> last day of class (e.g. <code>2025-05-02</code>)</li>
                    </ul>
                </li>
                <li>ğŸ“‹ Click <strong>Generate Token</strong></li>
                <li>ğŸ“¥ Paste the token below</li>
            </ol>
        </div>
<section>
        <form method="POST" class="upload-box">
            {{ form.hidden_tag() }}
            <label for="token">{{ form.token.label }}</label><br>
            {{ form.token(class="form-control") }}<br><br>
            {{ form.submit(class="btn-primary") }}
        </form>
    </div>
</div>
</section>

{%endblock%}